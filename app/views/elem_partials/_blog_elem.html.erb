<% if admin? %>
  <span class="controls">
    <%= link_to 'Add Post', new_admin_blog_post_path(elem.blog), :class => 'btn small' %>
    <%= link_to 'Manage Posts', shortcut_path(elem.blog.node.shortcut), :class => 'btn small' %>
    <%= link_to 'Settings', edit_admin_blog_elem_path(elem), :class => 'btn small' %>
    <%= link_to image_tag("delete.png", :alt => 'X'), admin_blog_elem_path(elem) , :confirm => "Are you sure?", :method => :delete, :class => 'control' %>
    <%= render :partial => 'elements/element_controls', :locals => {:element => elem.element} %>
  </span>
<% end %>

<%
blog = elem.blog
posts = blog.posts
posts = posts.limit(elem.count_limit) unless elem.count_limit.nil?
posts = posts.where("posts.created_at >= ?", elem.past_limit) unless elem.past_limit.nil?
%>


<% if elem.element.display_title %><h1 class="title  <%= elem.element.html_id %> "><%= elem.element.title %></h1><% end %>
<a class="rss" href="/feed">Subscribe</a>

<%= render :partial => "elem_partials/blog_elem_partials/#{elem.display_type_partial}", :locals => {:blog => blog, :posts => posts} %>
